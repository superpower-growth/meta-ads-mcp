# Meta Marketing API Configuration
# Required for querying ad performance metrics and video metadata
# Get your access token from: https://developers.facebook.com/tools/explorer/
# Ad account ID format: act_1234567890

# Access Token - Get from: https://developers.facebook.com/tools/explorer
# 1. Select your app in the Graph API Explorer
# 2. Click "Generate Access Token"
# 3. Grant permissions: ads_read, ads_management
# 4. For production, exchange for a long-lived token (60 days)
# Required permissions: ads_read, ads_management
META_ACCESS_TOKEN=your_long_lived_access_token_here

# Ad Account ID - Format: act_123456789
# Find this in:
# - Business Manager: Settings > Ad Accounts
# - Ads Manager: URL contains act=123456789
# Must include the "act_" prefix
META_AD_ACCOUNT_ID=act_123456789

# MCP Server Configuration
# Port for the MCP server to listen on
PORT=3000

# Host to bind the server to (0.0.0.0 for remote access, localhost for local only)
HOST=0.0.0.0

# Node environment (development, production, test)
NODE_ENV=production

# Authentication mode (set to 'false' for local Claude Code usage without OAuth)
# When false, uses META_ACCESS_TOKEN directly (no login required)
# When true, requires Facebook OAuth login (for team/multi-user setups)
REQUIRE_AUTH=false

# Facebook OAuth Configuration
# 1. Create a Facebook App at https://developers.facebook.com/apps/
# 2. Go to Settings > Basic to get your App ID and App Secret
# 3. Add OAuth redirect URI in Facebook Login settings: http://localhost:3000/auth/callback
# 4. Request permissions: email (for basic user identification)
FACEBOOK_APP_ID=your_facebook_app_id_here
FACEBOOK_APP_SECRET=your_facebook_app_secret_here
FACEBOOK_CALLBACK_URL=http://localhost:3000/auth/callback

# Session Configuration
# Generate a secure random secret with: openssl rand -base64 32
# This is used to sign session cookies
SESSION_SECRET=your_random_32_char_secret_here

# Session time-to-live in milliseconds (default: 24 hours)
SESSION_TTL=86400000

# Google Cloud Configuration (v1.1 Video Interpretation)
# Required for video storage (GCS) and caching (Firestore)
# Service account needs: Storage Object Creator, Storage Object Viewer, Cloud Datastore User
# Get service account JSON from: https://console.cloud.google.com/iam-admin/serviceaccounts

# Service account JSON key (single-line format)
# 1. Create a service account in Google Cloud Console
# 2. Grant roles: Storage Object Creator, Storage Object Viewer, Cloud Datastore User
# 3. Download JSON key and format as single line: cat key.json | jq -c '.'
# Leave empty to run server without GCP features (graceful degradation)
GOOGLE_SERVICE_ACCOUNT_JSON={"type":"service_account","project_id":"your-project","private_key_id":"...","private_key":"-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n","client_email":"...@your-project.iam.gserviceaccount.com","client_id":"...","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"..."}

# GCP Project ID (optional - auto-detected from service account if not specified)
GCP_PROJECT_ID=your-project-id

# GCS bucket name for video storage
# Create with: gsutil mb -c STANDARD -l us-central1 gs://your-bucket-name
GCS_BUCKET_NAME=meta-ads-videos

# Firestore Caching (v1.1)
# Cache video analysis results to avoid redundant API calls
# Longer TTL = more cost savings, but potentially stale data
# Set to 0 to disable caching (not recommended)
FIRESTORE_CACHE_TTL_HOURS=24

# Gemini AI Configuration (v1.1 Video Interpretation)
# Required for video creative analysis

# Option 1: Gemini API Key (recommended for quick start)
# - Get API key from: https://aistudio.google.com/app/apikey
# - Free tier: 15 requests/minute, 1500 requests/day
# - Simple setup, good for development
GEMINI_API_KEY=your_api_key_here

# Option 2: Vertex AI (recommended for production)
# - Requires GCP project with Vertex AI enabled
# - Higher rate limits, better for batch processing
# - Uses same service account as GCS/Firestore
# - Enable with: gcloud services enable aiplatform.googleapis.com
# GEMINI_USE_VERTEX_AI=true
# GEMINI_PROJECT_ID=your-gcp-project-id
# GEMINI_REGION=us-central1

# Model to use for video analysis (gemini-2.5-flash recommended for cost/speed balance)
# Options: gemini-2.5-flash, gemini-2.5-pro
GEMINI_MODEL=gemini-2.5-flash

# Use Vertex AI authentication instead of API key (requires GOOGLE_SERVICE_ACCOUNT_JSON)
# When true, uses service account; when false, uses GEMINI_API_KEY
GEMINI_USE_VERTEX_AI=false

# Gemini Cost Control
# Prevents accidentally analyzing very long videos
# Cost formula: duration_seconds Ã— 0.0001
# Example: 30-second video = $0.003
# Default: $0.10 per video (~1000 seconds maximum)
GEMINI_MAX_COST_PER_VIDEO=0.10
